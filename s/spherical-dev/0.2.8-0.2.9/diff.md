# Comparing `tmp/spherical_dev-0.2.8-py3-none-any.whl.zip` & `tmp/spherical_dev-0.2.9-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,27 +1,27 @@
-Zip file size: 12071 bytes, number of entries: 25
--rw-rw-r--  2.0 unx      554 b- defN 21-Jul-21 09:23 spherical_dev-0.2.8-py3.9-nspkg.pth
+Zip file size: 12397 bytes, number of entries: 25
+-rw-rw-r--  2.0 unx      554 b- defN 21-Jul-27 21:47 spherical_dev-0.2.9-py3.9-nspkg.pth
 -rw-rw-r--  2.0 unx        0 b- defN 20-Dec-08 16:39 spherical/dev/__init__.py
--rw-rw-r--  2.0 unx      512 b- defN 21-Jul-21 09:15 spherical/dev/cdk.py
--rw-rw-r--  2.0 unx     1115 b- defN 21-Jul-04 13:25 spherical/dev/checkjson.py
+-rw-rw-r--  2.0 unx     1319 b- defN 21-Jul-27 21:25 spherical/dev/cdk.py
+-rw-rw-r--  2.0 unx     1116 b- defN 21-Jul-21 15:37 spherical/dev/checkjson.py
 -rw-rw-r--  2.0 unx      572 b- defN 21-May-21 12:15 spherical/dev/clean.py
 -rw-rw-r--  2.0 unx     2110 b- defN 20-Dec-08 16:39 spherical/dev/debugger.py
 -rw-rw-r--  2.0 unx      219 b- defN 21-Jun-03 08:06 spherical/dev/dev.py
 -rw-rw-r--  2.0 unx      536 b- defN 21-May-17 22:00 spherical/dev/devpi.py
 -rw-rw-r--  2.0 unx      255 b- defN 21-May-21 12:15 spherical/dev/flake.py
 -rw-rw-r--  2.0 unx     1378 b- defN 21-May-21 12:15 spherical/dev/hooks.py
 -rw-rw-r--  2.0 unx      334 b- defN 21-May-21 12:15 spherical/dev/isort.py
 -rw-rw-r--  2.0 unx      431 b- defN 20-Dec-08 17:39 spherical/dev/log.py
 -rw-rw-r--  2.0 unx     1004 b- defN 21-Jul-21 09:15 spherical/dev/node.py
 -rw-rw-r--  2.0 unx      528 b- defN 21-May-17 22:00 spherical/dev/pypi.py
--rw-rw-r--  2.0 unx      315 b- defN 21-Jul-21 09:15 spherical/dev/tasks.py
+-rw-rw-r--  2.0 unx      315 b- defN 21-Jul-26 23:34 spherical/dev/tasks.py
 -rw-rw-r--  2.0 unx     1452 b- defN 21-May-21 12:15 spherical/dev/test.py
--rw-rw-r--  2.0 unx     2033 b- defN 21-Jul-21 09:15 spherical/dev/utils.py
+-rw-rw-r--  2.0 unx     2104 b- defN 21-Jul-27 21:45 spherical/dev/utils.py
 -rw-rw-r--  2.0 unx      647 b- defN 21-May-21 12:15 spherical/dev/configs/pre-commit-config.yaml
--rw-r--r--  2.0 unx     1088 b- defN 21-Jul-21 09:23 spherical_dev-0.2.8.dist-info/LICENSE
--rw-rw-r--  2.0 unx     1531 b- defN 21-Jul-21 09:23 spherical_dev-0.2.8.dist-info/METADATA
--rw-rw-r--  2.0 unx       92 b- defN 21-Jul-21 09:23 spherical_dev-0.2.8.dist-info/WHEEL
--rw-rw-r--  2.0 unx       10 b- defN 21-Jul-21 09:23 spherical_dev-0.2.8.dist-info/namespace_packages.txt
--rw-rw-r--  2.0 unx       10 b- defN 21-Jul-21 09:23 spherical_dev-0.2.8.dist-info/top_level.txt
--rw-rw-r--  2.0 unx        1 b- defN 21-Jul-21 09:21 spherical_dev-0.2.8.dist-info/zip-safe
-?rw-rw-r--  2.0 unx     2059 b- defN 21-Jul-21 09:23 spherical_dev-0.2.8.dist-info/RECORD
-25 files, 18786 bytes uncompressed, 8727 bytes compressed:  53.5%
+-rw-r--r--  2.0 unx     1088 b- defN 21-Jul-27 21:47 spherical_dev-0.2.9.dist-info/LICENSE
+-rw-rw-r--  2.0 unx     1531 b- defN 21-Jul-27 21:47 spherical_dev-0.2.9.dist-info/METADATA
+-rw-rw-r--  2.0 unx       92 b- defN 21-Jul-27 21:47 spherical_dev-0.2.9.dist-info/WHEEL
+-rw-rw-r--  2.0 unx       10 b- defN 21-Jul-27 21:47 spherical_dev-0.2.9.dist-info/namespace_packages.txt
+-rw-rw-r--  2.0 unx       10 b- defN 21-Jul-27 21:47 spherical_dev-0.2.9.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx        1 b- defN 21-Jul-27 21:25 spherical_dev-0.2.9.dist-info/zip-safe
+?rw-rw-r--  2.0 unx     2060 b- defN 21-Jul-27 21:47 spherical_dev-0.2.9.dist-info/RECORD
+25 files, 19666 bytes uncompressed, 9053 bytes compressed:  54.0%
```

## zipnote {}

```diff
@@ -1,8 +1,8 @@
-Filename: spherical_dev-0.2.8-py3.9-nspkg.pth
+Filename: spherical_dev-0.2.9-py3.9-nspkg.pth
 Comment: 
 
 Filename: spherical/dev/__init__.py
 Comment: 
 
 Filename: spherical/dev/cdk.py
 Comment: 
@@ -48,29 +48,29 @@
 
 Filename: spherical/dev/utils.py
 Comment: 
 
 Filename: spherical/dev/configs/pre-commit-config.yaml
 Comment: 
 
-Filename: spherical_dev-0.2.8.dist-info/LICENSE
+Filename: spherical_dev-0.2.9.dist-info/LICENSE
 Comment: 
 
-Filename: spherical_dev-0.2.8.dist-info/METADATA
+Filename: spherical_dev-0.2.9.dist-info/METADATA
 Comment: 
 
-Filename: spherical_dev-0.2.8.dist-info/WHEEL
+Filename: spherical_dev-0.2.9.dist-info/WHEEL
 Comment: 
 
-Filename: spherical_dev-0.2.8.dist-info/namespace_packages.txt
+Filename: spherical_dev-0.2.9.dist-info/namespace_packages.txt
 Comment: 
 
-Filename: spherical_dev-0.2.8.dist-info/top_level.txt
+Filename: spherical_dev-0.2.9.dist-info/top_level.txt
 Comment: 
 
-Filename: spherical_dev-0.2.8.dist-info/zip-safe
+Filename: spherical_dev-0.2.9.dist-info/zip-safe
 Comment: 
 
-Filename: spherical_dev-0.2.8.dist-info/RECORD
+Filename: spherical_dev-0.2.9.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## spherical/dev/cdk.py

```diff
@@ -1,12 +1,14 @@
 import shutil
+import subprocess
 
 import invoke
 
 from .node import node_install, npm_install
+from .utils import check_tools
 
 
 @invoke.task(node_install)
 def cdk(ctx):
     if shutil.which('cdk') is not None:
         return
     npm_install(ctx, ('aws-cdk',))
@@ -17,7 +19,35 @@
     ctx.run('cdk --app "inv cdk.infra" bootstrap')
     ctx.run('cdk --app "inv cdk.infra" deploy --all --require-approval=never', pty=True)
 
 
 @invoke.task(cdk)
 def destroy(ctx):
     ctx.run('cdk --app "inv cdk.infra" destroy --all --require-approval=never', pty=True)
+
+
+@check_tools('aws')
+def fetch_stack_output(app, key):
+    query = f"Stacks[0].Outputs[?OutputKey=='{key}'].OutputValue"
+    result = subprocess.check_output(
+        (
+            'aws', 'cloudformation', 'describe-stacks',
+            '--stack-name', app,
+            '--query', query,
+            '--output', 'text',
+        ),
+    )
+    return result.decode().strip()
+
+
+@invoke.task
+@check_tools('aws')
+def reboot_instance(ctx, app, key='instanceid'):
+    instance_id = fetch_stack_output(app, key)
+    ctx.run(f'aws ec2 reboot-instances --instance-ids {instance_id}')
+
+
+@invoke.task
+@check_tools('aws')
+def shell(ctx, app, key='publicip'):
+    ip = fetch_stack_output(app, key)
+    ctx.run(f'ssh -oStrictHostKeyChecking=no {ip} -l ec2-user', pty=True)
```

## spherical/dev/checkjson.py

```diff
@@ -3,19 +3,20 @@
 import difflib
 import json
 import pathlib
 import sys
 
 import invoke
 
+
 MAX_SIZE = 100 * 1024 * 1024
 
 
 @invoke.task
-def checkjson(_, path='/', maxsize=MAX_SIZE, update=False):
+def checkjson(_, path='.', maxsize=MAX_SIZE, update=False):
     """Check/update formatting of JSON files."""
     errors = 0
     for jsonpath in pathlib.Path(path).glob('**/*.json'):
         if jsonpath.stat().st_size > maxsize:
             print(f'{jsonpath} is too big')
             continue
         original = jsonpath.read_text(encoding='utf-8')
```

## spherical/dev/utils.py

```diff
@@ -1,38 +1,45 @@
-import functools
 import os
 import shlex
 import shutil
 import sys
 import termios
 import tty
 
+import invoke
+import wrapt
+
+
+def task_apply(task, **kwargs):
+    @invoke.task
+    def inner(ctx):
+        return task(ctx, **kwargs)
+    return inner
+
 
 def check_tools(*tools, early_check=False):
     checked = [False]
 
     def check_which():
         if checked[0]:
             return
         for name in tools:
             if not shutil.which(name):
                 raise RuntimeError('Tool `{}` not found'.format(name))
         checked[0] = True
 
-    def decorator(func):
-        @functools.wraps(func)
-        def inner(ctx, *args, **kwargs):
-            check_which()
-            return func(ctx, *args, **kwargs)
-        return inner
+    @wrapt.decorator
+    def inner(wrapped, instance, args, kwargs):
+        check_which()
+        return wrapped(*args, **kwargs)
 
     if early_check:
         check_which()
 
-    return decorator
+    return inner
 
 
 def ask(text):
     sys.stdout.write(text)
     sys.stdout.flush()
     fd = sys.stdin.fileno()
     old_settings = termios.tcgetattr(fd)
```

## Comparing `spherical_dev-0.2.8-py3.9-nspkg.pth` & `spherical_dev-0.2.9-py3.9-nspkg.pth`

 * *Files identical despite different names*

## Comparing `spherical_dev-0.2.8.dist-info/LICENSE` & `spherical_dev-0.2.9.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `spherical_dev-0.2.8.dist-info/METADATA` & `spherical_dev-0.2.9.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: spherical-dev
-Version: 0.2.8
+Version: 0.2.9
 Summary: Set of tools used in Spherical development
 Home-page: UNKNOWN
 Author: Anton Patrushev
 Author-email: ap@spherical.pm
 Maintainer: spherical.pm
 Maintainer-email: support@spherical.pm
 License: MIT
```

## Comparing `spherical_dev-0.2.8.dist-info/RECORD` & `spherical_dev-0.2.9.dist-info/RECORD`

 * *Files 7% similar despite different names*

```diff
@@ -1,25 +1,25 @@
-spherical_dev-0.2.8-py3.9-nspkg.pth,sha256=_Z-QMx1lTmRidxSVK_0uILqAESQe2HdTe4GXPViwggc,554
+spherical_dev-0.2.9-py3.9-nspkg.pth,sha256=_Z-QMx1lTmRidxSVK_0uILqAESQe2HdTe4GXPViwggc,554
 spherical/dev/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-spherical/dev/cdk.py,sha256=wUyhyZHJ52LwdpagqHRnA5xFJ2OB_dCh0bv2_SRLUb0,512
-spherical/dev/checkjson.py,sha256=xDl3UKLTIAHNnAvfrF1JPD3stgkKm7ts5RKSYr9uvjE,1115
+spherical/dev/cdk.py,sha256=Bmk96NXVJh9tGw50bSGjFcqmga-Ef9cHAQoWk_1yuF4,1319
+spherical/dev/checkjson.py,sha256=ZCKbc5gK9fKALNc1LFYpvD-7LNb-aIdw7kNRd-DRl6U,1116
 spherical/dev/clean.py,sha256=YFBJGWRHbc_r73vznmQPKhWPf87a3qRQs5X5cGG-fGw,572
 spherical/dev/debugger.py,sha256=RLRQLL0kZ3LbJgrHIM_zGg9XKXlT1kW8WNeiYVA7vK8,2110
 spherical/dev/dev.py,sha256=q9FwLV4HKjHG9JiXk96Xx2ROsYrYhcQj9_Vr-jTXD38,219
 spherical/dev/devpi.py,sha256=OF2wvhODfPdD7Vzoz42j6_2TeiyqvQsh2ikXmEy3OO8,536
 spherical/dev/flake.py,sha256=DvyJq6M_rBbUZ5gSEhhtOYAx0gfCck9MCaMLsHKQG3g,255
 spherical/dev/hooks.py,sha256=eWRbSei6pcsEZq816A2ym4R3O_wtwWVXXSswwaEHxNc,1378
 spherical/dev/isort.py,sha256=ISkRQ_qSAT7NIWidgb22zPH1VdTFaD6ums2rYGh2Dug,334
 spherical/dev/log.py,sha256=4Abwg5wp3XHr-tiUbn_cupsae6UMwBH2_pvBMPASA4w,431
 spherical/dev/node.py,sha256=laLhQio1ftREZ9Pr1Dn3dEaaumq2cdfAZMBWikh_9Zg,1004
 spherical/dev/pypi.py,sha256=YW5Arr6CU7SRjqY6zknA8QiH2kBfnrH4iuJDePRTC9k,528
 spherical/dev/tasks.py,sha256=1L5d-EhkzgUcGLpXmQOPTkn2rz-4sz3QBCJaRaoz3IU,315
 spherical/dev/test.py,sha256=cgd9ZU7Hczs3X-vl7sI8BAVkW4YB81j6wfsbmFPLf8c,1452
-spherical/dev/utils.py,sha256=wx3FH6WYarSkd1LISsPKOgyQPelZpAt4eSamKKxRDPY,2033
+spherical/dev/utils.py,sha256=BewHf4oq5BD_uJXX-Ho6sXGl0u-2SSZ6aatZI6m2Vn8,2104
 spherical/dev/configs/pre-commit-config.yaml,sha256=7Yvv__sk63yv3VMIK_hmwVghI0qH6IYqRvnLFmBe-5g,647
-spherical_dev-0.2.8.dist-info/LICENSE,sha256=FD-bVQ6eDtsQlVoT-XvN12iLhRUJzfcxLHScczxgpxc,1088
-spherical_dev-0.2.8.dist-info/METADATA,sha256=9Vp5gISHs7ECgKW3StmFaneqoEDV1eeA1hfPD2C3Rzs,1531
-spherical_dev-0.2.8.dist-info/WHEEL,sha256=OqRkF0eY5GHssMorFjlbTIq072vpHpF60fIQA6lS9xA,92
-spherical_dev-0.2.8.dist-info/namespace_packages.txt,sha256=D1HIG7Ud3TYJz5Sv9g9aoE4VQTLE-QFU-yEKOZrtBAs,10
-spherical_dev-0.2.8.dist-info/top_level.txt,sha256=D1HIG7Ud3TYJz5Sv9g9aoE4VQTLE-QFU-yEKOZrtBAs,10
-spherical_dev-0.2.8.dist-info/zip-safe,sha256=AbpHGcgLb-kRsJGnwFEktk7uzpZOCcBY74-YBdrKVGs,1
-spherical_dev-0.2.8.dist-info/RECORD,,
+spherical_dev-0.2.9.dist-info/LICENSE,sha256=FD-bVQ6eDtsQlVoT-XvN12iLhRUJzfcxLHScczxgpxc,1088
+spherical_dev-0.2.9.dist-info/METADATA,sha256=AgBvmY-I-BMOMmFay_3GParbVR87WxdGp5Bwapo98lI,1531
+spherical_dev-0.2.9.dist-info/WHEEL,sha256=OqRkF0eY5GHssMorFjlbTIq072vpHpF60fIQA6lS9xA,92
+spherical_dev-0.2.9.dist-info/namespace_packages.txt,sha256=D1HIG7Ud3TYJz5Sv9g9aoE4VQTLE-QFU-yEKOZrtBAs,10
+spherical_dev-0.2.9.dist-info/top_level.txt,sha256=D1HIG7Ud3TYJz5Sv9g9aoE4VQTLE-QFU-yEKOZrtBAs,10
+spherical_dev-0.2.9.dist-info/zip-safe,sha256=AbpHGcgLb-kRsJGnwFEktk7uzpZOCcBY74-YBdrKVGs,1
+spherical_dev-0.2.9.dist-info/RECORD,,
```

